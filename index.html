<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Paragraph → PDF</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }
    :root{font-family:Inter, Roboto, Arial, sans-serif}
    body{margin:16px;background:#f6f8fb;color:#0b1220}
    .container{max-width:980px;margin:0 auto;display:grid;grid-template-columns:1fr 360px;gap:20px}
    textarea{width:100%;min-height:240px;padding:12px;border-radius:8px;border:1px solid #d7dcee;font-size:14px;line-height:1.4;font-family:Roboto, sans-serif}
    .panel{background:white;padding:14px;border-radius:10px;box-shadow:0 4px 12px rgba(15,23,42,0.06)}
    label{display:block;margin-top:10px;font-size:13px;color:#334155}
    .row{display:flex;align-items:center;gap:12px;margin-top:8px}
    input[type=range], select{flex:1}
    .preview{height:240px;overflow:auto;padding:10px;border-radius:8px;border:1px dashed #e2e8f0;background:#fff}
    .preview .text{white-space:pre-wrap;font-family:Roboto, sans-serif}
    .controls{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    button{flex:1;padding:10px;border-radius:8px;border:0;background:#0f172a;color:#fff;cursor:pointer;min-width:120px}
    small.muted{color:#64748b}
    footer{margin-top:14px;font-size:12px;color:#64748b}

    /* Mobile tweaks */
    @media(max-width:768px){
      .container{grid-template-columns:1fr;gap:14px}
      textarea{min-height:160px}
      .preview{height:180px}
      button{min-width:unset;flex:1 1 auto}
    }
  </style>
</head>
<body>
  <h2>Paragraph → PDF</h2>
  <p class="muted">Paste your paragraph, tweak font-size and line-spacing, then tap <strong>Generate PDF</strong>. All magic happens in your browser.</p>

  <div class="container">
    <div>
      <div class="panel">
        <textarea id="inputText" placeholder="Paste your paragraph here...">Enter or paste the paragraph text you want to convert into a PDF. This is a demo of producing a downloadable PDF using jsPDF with line-wrapping and line-spacing controls.</textarea>
      </div>
    </div>

    <div>
      <div class="panel">
        <label for="fontSize">Font size: <span id="fontSizeVal">18</span> pt</label>
        <div class="row"><input id="fontSize" type="range" min="8" max="48" value="18"></div>

        <label for="lineSpacing">Line spacing: <span id="lineSpacingVal">1.5</span>x</label>
        <div class="row"><input id="lineSpacing" type="range" min="1" max="3" step="0.1" value="1.5"></div>

        <label for="previewFont">Preview font</label>
        <div class="row">
          <select id="previewFont">
            <option value="Roboto, sans-serif">Roboto</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="Arial, sans-serif">Arial</option>
          </select>
        </div>

        <label>Preview</label>
        <div class="preview" id="preview">
          <div class="text" id="previewText"></div>
        </div>

        <div class="controls">
          <button id="generate">Generate PDF</button>
          <button id="download" style="display:none">Download PDF</button>
          <button id="clear" class="secondary">Clear Text</button>
        </div>

        <footer>
          <small>Note: On-screen typography uses the Roboto web font. The PDF uses jsPDF’s standard Helvetica font for portability. To embed Roboto, you’d need to add the TTF as base64.</small>
        </footer>
      </div>
    </div>
  </div>

  <!-- jsPDF from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    const T = {
      input: document.getElementById('inputText'),
      fontSize: document.getElementById('fontSize'),
      fontSizeVal: document.getElementById('fontSizeVal'),
      lineSpacing: document.getElementById('lineSpacing'),
      lineSpacingVal: document.getElementById('lineSpacingVal'),
      previewText: document.getElementById('previewText'),
      preview: document.getElementById('preview'),
      previewFont: document.getElementById('previewFont'),
      generate: document.getElementById('generate'),
      download: document.getElementById('download')
    }

    function updatePreview(){
      const txt = T.input.value || '';
      T.previewText.style.fontSize = T.fontSize.value + 'pt';
      T.previewText.style.lineHeight = T.lineSpacing.value;
      T.previewText.style.fontFamily = T.previewFont.value;
      T.previewText.textContent = txt;
    }

    T.fontSize.addEventListener('input', ()=>{ T.fontSizeVal.textContent = T.fontSize.value; updatePreview(); })
    T.lineSpacing.addEventListener('input', ()=>{ T.lineSpacingVal.textContent = T.lineSpacing.value; updatePreview(); })
    T.input.addEventListener('input', updatePreview)
    T.previewFont.addEventListener('change', updatePreview)

    updatePreview()

    // PDF generation using jsPDF
    T.generate.addEventListener('click', async ()=>{
      const { jsPDF } = window.jspdf;
      const text = T.input.value || '';
      if(!text.trim()){ alert('Please paste some text first.'); return }

      const fontSize = parseInt(T.fontSize.value, 10);
      const lineSpacing = parseFloat(T.lineSpacing.value);

      const doc = new jsPDF({unit:'pt', format:'a4'});
      doc.setProperties({title: 'Converted Paragraph'});

      doc.setFont('helvetica');
      doc.setFontSize(fontSize);

      const pageWidth = doc.internal.pageSize.getWidth();
      const pageHeight = doc.internal.pageSize.getHeight();
      const margin = 36;

      const usableWidth = pageWidth - margin*2;
      const lines = doc.splitTextToSize(text, usableWidth);

      let x = margin;
      let y = margin + fontSize;
      const effectiveLineHeight = fontSize * lineSpacing;

      for(let i=0;i<lines.length;i++){
        const line = lines[i];
        if(y + effectiveLineHeight > pageHeight - margin){
          doc.addPage();
          doc.setFontSize(fontSize);
          y = margin + fontSize;
        }
        doc.text(line, x, y);
        y += effectiveLineHeight;
      }

      doc.save('output.pdf');
    })
    
    T.clear = document.getElementById('clear');
    T.clear.addEventListener('click', ()=>{
      T.input.value = '';
      updatePreview();
    });
  </script>
</body>
</html>
